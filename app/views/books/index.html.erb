<p style="color: green"><%= notice %></p>

<% content_for :title, "Books" %>

<!-- Header with button filter and heading -->
<div style="display: flex; align-items: center; justify-content: space-between;">
  <h1>Books</h1>

  <button id="filter-button" onclick="document.getElementById('filter-form').classList.toggle('hidden')">
    Filter
  </button>
</div>

<!-- Form hidden default -->
<div id="filter-form" class="hidden" style="margin-top: 10px;">
  <%= form_with url: books_path, method: :get, local: true do %>
    <div>
      <%= label_tag :author_id, "Author" %>
      <%= select_tag :author_id,
                     options_from_collection_for_select(Author.all, :id, :name, params[:author_id]),
                     include_blank: "All" %>
    </div>

    <div>
      <%= label_tag :bookcase_id, "Bookcase" %>
      <%= select_tag :bookcase_id,
                     options_from_collection_for_select(Bookcase.all, :id, :name, params[:bookcase_id]),
                     include_blank: "All" %>
    </div>

    <%= submit_tag "Apply Filter" %>
  <% end %>
</div>

<!-- Show books -->
<div id="books">
  <% @books.each do |book| %>
    <%= render book %>
    <p>
      <%= link_to "Show this book", book %>
    </p>
  <% end %>
</div>

<%= link_to "New book", new_book_path %>

<style>
  .hidden { display: none; }
</style>
